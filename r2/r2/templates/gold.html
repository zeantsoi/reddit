## The contents of this file are subject to the Common Public Attribution
## License Version 1.0. (the "License"); you may not use this file except in
## compliance with the License. You may obtain a copy of the License at
## http://code.reddit.com/LICENSE. The License is based on the Mozilla Public
## License Version 1.1, but Sections 14 and 15 have been added to cover use of
## software over a computer network and provide for limited attribution for the
## Original Developer. In addition, Exhibit A has been modified to be consistent
## with Exhibit B.
##
## Software distributed under the License is distributed on an "AS IS" basis,
## WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for
## the specific language governing rights and limitations under the License.
##
## The Original Code is Reddit.
##
## The Original Developer is the Initial Developer.  The Initial Developer of
## the Original Code is CondeNet, Inc.
##
## All portions of the code written by CondeNet are Copyright (c) 2006-2010
## CondeNet, Inc. All Rights Reserved.
################################################################################

<%namespace file="utils.html" import="error_field, success_field"/>
<%namespace name="utils" file="utils.html"/>
<%namespace file="createsubreddit.html" import="radio_type"/>

<%! from r2.lib.strings import strings, Score %>

<script type="text/javascript">
  $(function() {
    $(".gold-form [name='goldtype']").change(function() {
      var button = $(this);
      var selection = "." + button.val();
      var goldsecs = $(".gold-subsection");
      var selected = goldsecs.filter(selection);
      var others = goldsecs.not(selection);
      others.fadeOut('fast');
      selected.fadeIn('fast');
    });
  });
</script>

<%def name="goldsec(goldtype)">
  <form id="gold" action="/goldtest" method="get"
        class="content gold-subsection ${goldtype}">
    <input type="hidden" name="goldtype" value="${goldtype}"/>
    ${caller.body()}
  </form>
</%def>

<%def name="gold_dropdown(what)">
  <select name="months" class="gold-dropdown">
    %for i in range(1, 8):
       <option value="${i}">
         ${unsafe(Score.somethings(i, what))}: $${"%0.2f" % (3.99 * i)}
       </option>
    %endfor
    %for i in range(1, 4):
       <option value="${i * 12}" ${"SELECTED" if i == 1 else ""}>
         ${unsafe(Score.somethings(i * 12, what))} &#32; (special price!): $${"%0.2f" % (29.99 * i)}
       </option>
    %endfor
  </select>
  <br/>
</%def>

<div class="gold-form">
  <h1>${_("reddit gold")}</h1>

  <form class="content spacer">
    <%utils:round_field title="">
    ${radio_type("goldtype", "autorenew", _("buy for yourself, as an ongoing subscription"),
      "", False)}<br/>
    ${radio_type("goldtype", "onetime", _("buy for yourself, as a one-time purchase"),
      "", False)}<br/>
##    ${radio_type("goldtype", "gift", _("give reddit gold to someone else"),
##      "", False)}<br/>
##    ${radio_type("goldtype", "creddits", _('buy reddit gold "creddits"'),
##      unsafe("<a href='/help/creddits'>details</a>"),
##      False)}<br/>
    ${radio_type("goldtype", "creddits", _("buy reddit gold for someone else"),
      unsafe("<a href='/help/creddits'>details</a>"),
      False)}<br/>
    </%utils:round_field>
  </form>

  <%self:goldsec goldtype="autorenew">
    <%utils:round_field title="monthly or yearly?">
    ${radio_type("period", "monthly", _("$3.99 / month"), "", False)}<br/>
    ${radio_type("period", "yearly", _("$29.99 / year (which works out to just $2.50 / month!)"),
      "", True)}<br/>
      <button type="submit" class="btn gold-button">${_("subscribe")}</button>
      <span class="status"></span>
    </%utils:round_field>
  </%self:goldsec>

  <%self:goldsec goldtype="onetime">
    <%utils:round_field title="how many months?">
      ${gold_dropdown("months")}
      <button type="submit" class="btn gold-button">${_("buy")}</button>
      <span class="status"></span>
    </%utils:round_field>
  </%self:goldsec>

  <%self:goldsec goldtype="gift">
    <%utils:round_field title="how many months?">
    who? [_____________]<br/>
    what? [_____________]<br/>
    where? [_____________]<br/>
    when? [_____________]<br/>
    why? [_____________]
    </%utils:round_field>
  </%self:goldsec>

  <%self:goldsec goldtype="creddits">
    <%utils:round_field title="how many creddits would you like to buy? (each will allow you to give one month of reddit gold)">
      ${gold_dropdown("creddits")}
      <button type="submit" class="btn gold-button">${_("buy")}</button>
      <span class="status"></span>
    </%utils:round_field>
  </%self:goldsec>

</div>
