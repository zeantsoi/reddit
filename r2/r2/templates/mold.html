## The contents of this file are subject to the Common Public Attribution
## License Version 1.0. (the "License"); you may not use this file except in
## compliance with the License. You may obtain a copy of the License at
## http://code.reddit.com/LICENSE. The License is based on the Mozilla Public
## License Version 1.1, but Sections 14 and 15 have been added to cover use of
## software over a computer network and provide for limited attribution for the
## Original Developer. In addition, Exhibit A has been modified to be consistent
## with Exhibit B.
##
## Software distributed under the License is distributed on an "AS IS" basis,
## WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for
## the specific language governing rights and limitations under the License.
##
## The Original Code is Reddit.
##
## The Original Developer is the Initial Developer.  The Initial Developer of
## the Original Code is CondeNet, Inc.
##
## All portions of the code written by CondeNet are Copyright (c) 2006-2010
## CondeNet, Inc. All Rights Reserved.
################################################################################

<%namespace file="utils.html" import="error_field, success_field"/>
<%namespace name="utils" file="utils.html"/>
<%namespace file="createsubreddit.html" import="radio_type"/>

<%! from r2.lib.strings import strings, Score %>

%if thing.user_spores < 1:
<table style="margin-left: 5px">
  <tr><td>
  <img src="http://static.reddit.com/award/mold-70.png"
       style="margin-right: 5px"/>
  </td><td style="font-size: 12px;">
  You don't have any reddit mold spores to give. :(
  <br/><br/>
  However, you can get one for free if you buy a
  &#32;
  <a href="http://www.reddit.com/gold?goldtype=creddits">reddit gold creddit</a>
  &#32;
  today.
</td></tr></table>
%else:

<div class="mold-form" style="margin-left: 5px">
  <h1>
    <img src="http://static.reddit.com/award/mold-70.png" /> &#32;
    ${_("reddit mold")} (<a href="/help/mold">help</a>)
  </h1>

  <form id="mold" action="/mold" method="get"
        class="content mold-subsection gift">
<%
   if thing.user_spores == 1:
     sporemsg1 = 'You have a reddit mold spore.'
     sporemsg2 = 'Who deserves it?'
   else:
     sporemsg1 = 'You have %d reddit mold spores.' % thing.user_spores
     sporemsg2 = 'Who deserves one?'
%>
    <%utils:round_field title="${sporemsg1}">
      <div class="spacer">
        ${sporemsg2}
        <input type="text" name="recipient" value="${thing.recipient_name}" />
        ${error_field("NO_USER", "recipient", "span")}
        ${error_field("USER_DOESNT_EXIST", "recipient", "span")}
        %if thing.bad_recipient:
          <br/>
          <span class="wrong">${_("that user doesn't exist")}</span>
        %endif
      </div>

      <div class="spacer">
        What message do you want to put in their sidebar?
        <textarea rows="5" cols="40" name="giftmessage" id="giftmessage">
        </textarea>
        %if thing.preview:
          <br/>
          <span class="wrong">You need to include a message.</span>
        %endif
      </div>

      <input type="hidden" name="preview" value="true"/>

      <button type="submit" class="btn mold-button">preview</button>
      <span class="status"></span>

    </%utils:round_field>
  </form>

</div>

%endif
