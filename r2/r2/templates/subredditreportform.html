## The contents of this file are subject to the Common Public Attribution
## License Version 1.0. (the "License"); you may not use this file except in
## compliance with the License. You may obtain a copy of the License at
## http://code.reddit.com/LICENSE. The License is based on the Mozilla Public
## License Version 1.1, but Sections 14 and 15 have been added to cover use of
## software over a computer network and provide for limited attribution for the
## Original Developer. In addition, Exhibit A has been modified to be
## consistent with Exhibit B.
##
## Software distributed under the License is distributed on an "AS IS" basis,
## WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for
## the specific language governing rights and limitations under the License.
##
## The Original Code is reddit.
##
## The Original Developer is the Initial Developer.  The Initial Developer of
## the Original Code is reddit Inc.
##
## All portions of the code written by reddit are Copyright (c) 2006-2015
## reddit Inc. All Rights Reserved.
###############################################################################
<%!
    from r2.lib.template_helpers import static
%>
<%namespace file="utils.html" import="error_field" />

  <form id="report-action-form" class="subreddit-report-form action-form rounded" data-form-action="report">
    <input type="hidden" name="thing_id" value="${thing.thing_fullname}">
    <a class="action-icon action-icon-info c-hide-text may-blank"
       href="${thing.rules_page_link}"
       title="${_('View the community rules')}">
      ${_('View the community rules')}
    </a>
    <div class="reason-prompt">
      ${_("Why are you reporting this to the community moderators?")}
    </div>
    <ol class="report-reason-list">
      %for rule in thing.rules:
        <li class="report-reason-item">
          <label>
            <input type="radio" name="reason" value="${rule}">
            <div class="report-reason-display">${rule}</div>
          </label>
        </li>
      %endfor
      %if thing.system_rules:
        <li class="report-reason-item">
          <label>
            <input type="radio" name="reason" class="site-reason-radio" value="site_reason_selected">
            <div class="report-reason-display">
              <select name="site_reason">
                %for rule in thing.system_rules:
                  <option value="${rule}">${_("Reddit rule: %(rule_name)s" % dict(rule_name=rule))}</option>
                %endfor
              </select>
            </div>
          </label>
        </li>
      %endif
      <li class="report-reason-item report-reason-other">
        <label>
          <input type="radio" name="reason" value="other">
          <div class="report-reason-display">
            <div>${_("Other (max %(num)s characters):") % dict(num=100)}</div>
            <input name="other_reason" class="c-form-control" value="" maxlength="100" type="text" disabled>
            ${error_field("TOO_LONG", "other_reason", "span")}
          </div>
        </label>
      </li>
    </ol>
    <div class="c-submit-group">
      <button type="button" class="btn c-btn c-btn-secondary report-cancel">
        ${_("cancel")}
      </button>
      <button type="submit" class="btn c-btn c-btn-primary submit-action-thing" disabled>
        ${_("report")}
      </button>
    </div>
    <span class="status" style="display: none"></span>
  </form>
